# 지난 주 목표

> 로컬/개발/운영 환경에 따른 환경변수 설정과 배포는 어떻게 이루어져야 하는가? (feat. MSA 환경, CI/CD, 깃허브)

에 대한 기술 조사와 가이드 작성.

# 완료한 작업

기술 조사 겸 가이드 문서를 작성하였음.

# 진행 중인 작업

7주차 작업은 완료!

# 배운 점

- MSA 스터디하기에 역량이 가장 부족한 건 어쩌면 나일지도? 라는 생각을 하게됨
- 하나의 서비스(모놀리스)를 2개 이상의 서비스로 나누기만 하면 쉽게 끝날 줄 알았는데... 그건 MSA 알지도 못하는(엠알못) 나의 어림없는 생각이었고
- 서비스가 2개 이상으로 나눠지는 순간부터 난이도가 급상승한다는 것을 빨리 알아 차리지 못했다
- 이상적인 상황
    - 협업을 위한 문서가 잘 작성됨 (api docs)
    - 각자 담당한 서비스의 기능을 완벽하게 구현함
    - 로컬에서 서비스 테스트 완료
    - 로컬에서 통합 테스트 완료
    - dev 브랜치에 머지하면 개발 서버로 자동 배포
    - 내가 담당한 서비스가 잘 동작하면서 전체 서비스가 정상적으로 작동
    - 하면 좋겠지만 ... 실제로 하면 말처럼 쉽게 안됨
- MSA 를 위한 개발 및 배포 준비를 **로컬 환경**부터 시작하면서 관련 개념들을 익히고 왜 이렇게 해야하는 지 이해하는 시간이 필요했는데
- 처음부터 **'개발 서버에 최대한 빨리 배포한다!'** 여기에 너무 꽂혀 있어서 그러지 못했음
- 즉, 순서대로 진행하지 못하고 너무 많이 건너 뛰었고 어찌저찌 애플리케이션은 배포 됐지만 제대로 동작하지 않음
- 현재 구성을 발전시켜 나가기에는 한계가 있다고 판단됨
- 이것은 스터디를 제대로 이끌어가지 못한 리더의 잘못.. `죄송합니다 여러분`

## But!

- 순서가 조금 바뀌었을 뿐 의미없는 작업을 한 것은 아니다
- 이론이 부족하다는 점을 알게 됐고, 실습을 통해서 실제로 겪었기 때문에 더 확실히 체감할 수 있었던 것!
- 여전히 목표는 `최소기능 + 최단기간 배포` 이며 각 서비스별로 기능적인 부분은 어느정도 완성됐다
- **남은 것은 각 서비스들을 어떻게 잘 테스트하고 배포할 것인지에 대한 고민과 공부 그리고 적용이다**

# 개선할 점

> - 통일된 프로젝트 구조 + 배포 자동화
> - 로컬 개발 환경에서 통합 테스트 (프로세스, 컨테이너)

- 구성원들의 MSA 이해
    - 개발, 테스트, 배포를 어떻게 해야 하는 지
    - 환경 변수 처리
      - 이게 언제 어디서 어떻게 쓰이는 거지?
- 통합 테스트 환경 구성
    - 로컬
        - 프로세스 (jar 실행)
          - 컨테이너고 뭐고 잘 모르겠고
          - 프로젝트 전부 다운받아서 하나씩 실행시키면 돼야 하잖아요?
        - 컨테이너
          - 결국 컨테이너로 배포하는 거니까 로컬 환경에서도 문제 없도록!
    - 개발
        - 컨테이너
          - 로컬 환경에서 개발 서버로 옮겨왔을 뿐

# 기타 공유 사항

## 모든 구성원이 공통된 목표와 역할을 가지는 것으로 변경

- 파트별 역할은 잠시 보류
- 지금까지는 웹 서비스 개발 및 배포 관점에서 각자 맡은 역할을 잘 수행했음
- 이제는 MSA 개발/배포 프로세스를 완벽하게 이해해야 할 단계에 있다고 생각
- 처음부터 끝까지 직접 해보지 않으면 제대로 알 수 없으며, 협업을 위한 소통 능력도 부족할 것으로 예상
- 이 단계가 끝나면 mmb 배포는 자연스럽게 완료될 것

## 역할

> 모든 구성원은 본인의 담당 서비스를 개발하며, 개발 서버까지 자동 배포될 수 있도록 프로젝트를 구성한다

- 조 : 프론트엔드(리액트 + Nginx)
- 임 : Auth 서비스(구글 소셜 로그인, 사용자 인증)
- 송 : 회원 서비스(회원 관리)
- 김 : API GW(요청 라우팅)
- 공 : 질문 서비스(질문/답변 관리)
- 심, 이, 최
    - API 1개 짜리 애플리케이션 개발
        - 저장소 생성
        - 애플리케이션 이름 마음대로
        - 스프링 부트, 그레이들, Java or Kotlin
    - GET 요청받으면 임의의 문자열 응답하는 API 개발
    - DB 연결하여 API 요청 받은 시간 삽입
        - DB 종류 무관 (오라클, MySql, Maria DB, MongoDB ...)
    - API Docs 작성
    - (모니터링 기능 잠시 보류)

## (가능한 범위 안에서) 작업 시간 맞추기

- 모두 같은 작업을 하기 때문에 서로 물어보거나 알려줄 수 있음
- 최대한 많은 인원이 동시에 접속하는 것으로 전체 작업 속도를 '매우 빠르게' 올릴 수 있음
- 빠른 피드백이 곧 빠른 작업이다

# 다음 주 계획

> 1. 모든 서비스(프로젝트)는 배포 가이드 문서에 따라서 구성을 통일한다
> 2. 일단 내 서비스만 잘되면 된다. (로컬/개발)
> 3. 그 이후에는 너도 잘돼야 한다.
> 4. 모든 구성원이 로컬 환경에서 통합 테스트를 수행할 수 있어야 한다.

- 구성원들이 작성한 기술 조사 문서와 가이드 문서를 병합하여 하나의 가이드 문서를 완성
- 가이드 문서는 완벽할 수 없으니 각자 실습하면서 문제가 되는 부분을 공유하고 가이드 문서 점진적으로 개선

## 목표

- (나만 잘되기) 일단 내 서비스가 개발 서버에 배포 되면 성공.
- (너도 잘되기) 각 서비스의 dev 브랜치를 체크아웃 받아서 추가 수정/설정 없이 프로세스 또는 컨테이너로 실행했을 때 로컬 개발 환경에서 mmb 정상 동작 ✅
    - 단, 보안을 위하여 미리 설정할 수 없는 값을 가진 서비스는 예외 (README 문서에 명시)
